{
    "id": "6fa786cf-7b4a-4775-8bc9-5a1d46f5187d",
    "document_type": "node_type",
    "code": "fhir_output_history",
    "data": {
        "id": "6fa786cf-7b4a-4775-8bc9-5a1d46f5187d",
        "code": "fhir_output_history",
        "name": "FHIR Output History",
        "group": "FHIR",
        "name_": "FHIR Output Search CLONED",
        "defaults": "{\n    \"fhir_params\": {\n        \"fhirVersion\": \"R4\"\n    },\n    \"input_format\": \"json\",\n    \"output_format\": \"json\",\n    \"api\": \"history\",\n    \"method\": \"onInstance\",\n    \"onInstance_params\": {\n        \"count\": 10\n    }\n}",
        "package_code": "angie.fhir",
        "xml_template": "<route  id=\"{{source}}\">\n    <from uri=\"direct:{{source}}\"/>\n    <setHeader name=\"CamelFhir.id\">\n        <groovy>\n<![CDATA[\nimport org.hl7.fhir.r4.model.IdType\nreturn new IdType(\"{{safe onInstance_params.type}}/{{safe onInstance_params.id}}\");\n]]>\n        </groovy>\n    </setHeader>\n    <setHeader name=\"CamelFhir.count\">\n        <groovy>\n<![CDATA[\nreturn {{onInstance_params.count}};\n]]>\n        </groovy>\n    </setHeader>\n    <setHeader name=\"CamelFhir.cutoff\">\n        <groovy>\n<![CDATA[\nif (\"{{onInstance_params.cutoff}}\" != null && \"{{onInstance_params.cutoff}}\".trim() != \"\") {\n    return new java.text.SimpleDateFormat(\"yyyy-MM-dd\").parse(\"{{onInstance_params.cutoff}}\");\n}\nreturn (java.util.Date) null;\n]]>\n        </groovy>\n    </setHeader>\n    <setHeader name=\"CamelFhir.iCutoff\">\n        <groovy>\n<![CDATA[\norg.hl7.fhir.instance.model.api.IPrimitiveType iCuttOff = null;\nreturn iCuttOff;\n]]>\n        </groovy>\n    </setHeader>\n    <setHeader name=\"CamelFhir.returnType\">\n        <groovy>\n<![CDATA[\nreturn org.hl7.fhir.r4.model.Bundle.class;\n]]>\n        </groovy>\n    </setHeader>\n    <to uri=\"fhir://{{api}}/{{method}}?serverUrl={{serverUrl}}&amp;{{querystring fhir_params extra_query_params true}}\" />\n    {{#if (eq output_format \"json\")}}\n        {{applyMarshal \"fhirJson\" fhir_params}}\n    {{/if}}\n    {{#if (eq output_format \"xml\")}}\n        {{applyMarshal \"fhirXml\" fhir_params}}\n    {{/if}}\n\n    {{generateDestination target}}\n</route>",
        "json_ui_schema": "{\n    \"label\": {\n        \"ui:columnSize\": \"12\"\n    },\n    \"serverUrl\": {\n        \"ui:columnSize\": \"9\"\n    },\n    \"fhir_params\": {\n        \"fhirVersion\": {\n            \"ui:columnSize\": \"3\"\n        }\n    },\n    \"method\": {\n        \"ui:columnSize\": \"6\"\n    },\n    \"onInstance_params\": {\n        \"condition\": \"method=onInstance\",\n        \"type\": {\n            \"ui:columnSize\": \"5\"\n        },\n        \"id\": {\n            \"ui:columnSize\": \"3\"\n        },\n        \"count\": {\n            \"ui:columnSize\": \"2\"\n        },\n        \"cutoff\": {\n            \"ui:widget\": \"alt-date\"\n        }\n    }\n}",
        "package_version": "1.0.0",
        "json_data_schema": "{\n    \"description\": \"FHIR Output History\",\n    \"type\": \"object\",\n    \"required\": [\n        \"serverUrl\",\n        \"api\",\n        \"method\"\n    ],\n    \"properties\": {\n        \"label\": {\n            \"title\": \"Label\",\n            \"type\": \"string\"\n        },\n        \"serverUrl\": {\n            \"title\": \"URL Servidor History\",\n            \"type\": \"string\"\n        },\n        \"fhir_params\": {\n            \"title\": \"Servidor FHIR\",\n            \"type\": \"object\",\n            \"required\": [\n                \"fhirVersion\"\n            ],\n            \"properties\": {\n                \"fhirVersion\": {\n                    \"title\": \"Versión FHIR\",\n                    \"type\": \"string\",\n                    \"enum\": [\n                        \"DSTU2\",\n                        \"DSTU2_HL7ORG\",\n                        \"DSTU2_1\",\n                        \"DSTU3\",\n                        \"R4\",\n                        \"R5\"\n                    ],\n                    \"enumNames\": [\n                        \"DSTU2\",\n                        \"DSTU2_HL7ORG\",\n                        \"DSTU2_1\",\n                        \"DSTU3\",\n                        \"R4\",\n                        \"R5\"\n                    ]\n                }\n            }\n        },\n        \"method\": {\n            \"title\": \"Método\",\n            \"type\": \"string\",\n            \"enum\": [\n                \"onInstance\"\n            ],\n            \"enumNames\": [\n                \"onInstance\"\n            ]\n        },\n        \"onInstance_params\": {\n            \"title\": \"onInstance parámetros\",\n            \"type\": \"object\",\n            \"required\": [\n                \"id\",\n                \"count\"\n            ],\n            \"properties\": {\n                \"type\": {\n                    \"title\": \"Tipo\",\n                    \"type\": \"string\"\n                },\n                \"id\": {\n                    \"title\": \"ID\",\n                    \"type\": \"number\"\n                },\n                \"count\": {\n                    \"title\": \"Máximo recursos\",\n                    \"type\": \"number\"\n                },\n                \"cutoff\": {\n                    \"title\": \"Fecha desde\",\n                    \"type\": \"string\"\n                }\n            }\n        },\n        \"extra_query_params\": {\n            \"title\": \"Parámetros Extra\",\n            \"type\": \"array\",\n            \"items\": {\n                \"type\": \"object\",\n                \"required\": [\n                    \"code\",\n                    \"value\"\n                ],\n                \"properties\": {\n                    \"code\": {\n                        \"title\": \"Clave\",\n                        \"type\": \"string\"\n                    },\n                    \"value\": {\n                        \"title\": \"Valor\",\n                        \"type\": \"string\"\n                    }\n                }\n            }\n        }\n    }\n}",
        "react_component_type": "AngieDefaultNode"
    },
    "package_code": "angie.fhir",
    "package_version": "1.0.0"
}